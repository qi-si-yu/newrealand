TNZ=window.TNZ||{},TNZ.PrimaryMenu=function(u){var l={};l.$mobBtn=u("#js-mobile-menu-button"),l.$nav=u("#js-primary-menu"),l.$icon_open=u("#js-toggle-menu-open"),l.$icon_close=u("#js-toggle-menu-close"),l.$submenu=u(".js-submenu"),l.$submenu_parent=u(".js-submenu-parent"),l.submenu_parent=".js-submenu-parent",l.submenu_link=".js-submenu-link",l.submenu_column=".js-submenu-column",l.submenu_column_list=".js-submenu-column-list";function e(){l.$mobBtn.attr("aria-expanded","false"),l.$nav.removeClass("is-displayed"),l.$icon_open.prop("hidden",!1),l.$icon_close.prop("hidden",!0)}var m=function(n){var e=l.$nav.find('[aria-expanded="true"]'),i=e.find(l.submenu_link).length,a=e.find(l.submenu_column).length;if(27===n.keyCode||9===n.keyCode)n.preventDefault(),function(n){n.attr("aria-expanded",!1),n.off("keydown",m),n.find(".primary-menu__link").focus()}(e);else if(13===n.keyCode&&"a"!==n.target.tagName.toLowerCase())_link=e.find(l.submenu_column_list).eq(0).find(l.submenu_link).eq(0),_link.focus();else if(38===n.keyCode||40===n.keyCode){var u=e.find(l.submenu_link).index(e.find(":focus")),o=i-1;if(38===n.keyCode)if(0<u)var s=u-1;else s=o;if(40===n.keyCode)if(-1!==u&&u<i-1)s=u+1;else s=0;_link=e.find(l.submenu_link).eq(s),_link.focus()}else if(37===n.keyCode||39===n.keyCode){var t=e.find(l.submenu_column).index(e.find(":focus").parents(l.submenu_column)),d=a-1;if(37===n.keyCode)if(0<t)var r=t-1;else r=d;if(39===n.keyCode)if(-1!==t&&t<a-1)r=t+1;else r=0;_link=e.find(l.submenu_column).eq(r).find(l.submenu_link).eq(0),_link.focus()}};return function(){var n="click";if(!!navigator.userAgent.match(/iPad|iPhone/i)&&(n="click touchstart"),l.$mobBtn.on(n,function(n){l.$nav.hasClass("is-displayed")?e():(l.$mobBtn.attr("aria-expanded","true"),l.$nav.addClass("is-displayed"),l.$icon_open.prop("hidden",!0),l.$icon_close.prop("hidden",!1)),n.preventDefault()}),TNZ.EventManager.bind("TNZ.Resize.End",function(){e()}),TNZ.initialRequestConfig.section){var a=TNZ.initialRequestConfig.section;l.$nav.find(".primary-menu__item > a[data-group_name]").each(function(n){var e=u(this),i=e.data("group_name");i&&i.length&&i==a&&e.addClass("is-active")})}l.$submenu_parent.on("focus",function(){u("body").hasClass("user-tab")&&function(n){l.$submenu_parent.attr("aria-expanded",!1),n.attr("aria-expanded",!0),n.on("keydown",m)}(u(this))}),e(),l.$nav.one("mouseenter",function(n){l.$nav.find("figure").each(function(n,e){u(e).hasClass("lazy--loaded")||TNZ.FigureManager.loadLazyImage(e.id)})})}(),{}},TNZ.JSLib.requireLoadEvent(["jqready"],function(){TNZ.PrimaryMenu(jQuery)});