TNZ=window.TNZ||{},TNZ.Swiftype=function(c,g){if(c=c||{},g=g||jQuery,!1==!!c.engine_key)throw new Error('Settings param "engine_key" is required. This is the swiftypes read-only public API key e.g. xnYtxHtwVLfCzAGKwEBy');if(!1==!!c.engine_slug)throw new Error('Settings param "engine_slug" is required. E.g. www-int');if(!1==!!c.install_key)throw new Error('Settings param "install_key" is required. This is used for click tracking. it is taken from the generated play and play javascript - e.g.: z_1TiG1YLLcx5KqAwfRw');c.CLICK_TRACK="https://search-api.swiftype.com/api/v1/public/installs/pc/"+c.install_key+".json",c.ENGINE_SEARCH="https://api.swiftype.com/api/v1/public/engines/search",c.RECORDS_PER_PAGE=5;var e={},y={runFacetedSearch:function(e,t,n,r,a,i){var s={q:decodeURIComponent(e),engine_key:c.engine_key,facets:{page:["content_category"]},spelling:"always",page:n,per_page:r};null!=t&&(s.filters={page:{content_category:t}});var o={url:c.ENGINE_SEARCH,data:JSON.stringify(s),type:"POST",contentType:"application/json",dataType:"json"};TNZ.Util.console.log("TNZ.Swiftype|api.runFacetedSearch() : parameters",o),g.ajax(o).done(a).fail(i)},createClickTrackURL:function(e,t,n,r){c.CLICK_TRACK;var a=encodeURI("_st_tracking[doc_id]")+"="+e+"&"+encodeURI("_st_tracking[query][q]")+"="+t+"&"+encodeURI("_st_tracking[query][page]")+"="+n+"&"+encodeURI("_st_tracking[query_type]")+"=search&"+encodeURI("_st_url")+"="+encodeURIComponent(r);return c.CLICK_TRACK+"?"+a}},f=function(e){return function(){return document.location.href=e,!1}};e.runFacetedSearch=function(e,t,n){var r=e.getSearchResultObject(),a=r.getQuery(),i=r.getFacet(),s=function(u,p){return function(e,t,n){var r,a=e.info.page,i=e.records.page,s=e.info.page.facets.content_category;for(searchResultObject=u.getSearchResultObject(),r=0;r<i.length;r++){var o=i[r],c=y.createClickTrackURL(o.external_id,searchResultObject.getQuery(),p,o.url),g=f(c);searchResultObject.addResult(p,o.external_id,o.title,o.url,o.info,o.image,o.content_category||"other",g)}for(key in aKeys=[],s)0<key.length&&aKeys.push(key);for(aKeys.sort(),r=0;r<aKeys.length;r++)searchResultObject.addFacet(aKeys[r],s[aKeys[r]]);var l=a.spelling_suggestion||{text:""};searchResultObject.setMisspelledSuggestion(l.text),searchResultObject.setResultCount(a.total_result_count),u.setStatus(!0),u.complete(),TNZ.Util.console.log("TNZ.Swiftype|donehandler() : args",e,t,n)}}(e,t),o=function(r){return function(e,t,n){TNZ.Util.console.log("TNZ.Swiftype|FailHandler() : args",e,t,n),r.setStatus(!1),r.setMessage("Failed to communicate properly with Swiftype"),r.setErrorData(arguments),r.complete()}}(e);y.runFacetedSearch(a,i,t,n,s,o)};return e},TNZ.SwiftypeSuggestion=function(s,o){if(s=s||{},o=o||jQuery,!1==!!s.engine_key)throw new Error('Settings param "engine_key" is required. This is the swiftypes read-only public API key e.g. xnYtxHtwVLfCzAGKwEBy');if(!1==!!s.engine_slug)throw new Error('Settings param "engine_slug" is required. E.g. www-int');s.ENGINE_SEARCH="https://api.swiftype.com/api/v1/public/engines/suggest";var e={},i={runSuggestSearch:function(e,t,n,r){var a={q:decodeURIComponent(e),engine_key:s.engine_key,per_page:t,search_fields:{page:["title"]},fetch_fields:{page:["title"]}},i={url:s.ENGINE_SEARCH,data:JSON.stringify(a),type:"POST",contentType:"application/json",dataType:"json"};TNZ.Util.console.log("TNZ.SwiftypeSuggestion|api.runSuggestSearch() : parameters",i),o.ajax(i).done(n).fail(r)}};e.runSuggestSearch=function(e,t){var n=e.getSuggestionObject().getQuery(),r=c(e,t),a=g(e,t);i.runSuggestSearch(n,t,r,a)};var c=function(s,e){return function(e,t,n){var r=e.records.page;searchSuggestionsObj=s.getSuggestionObject();for(var a=0;a<r.length;a++){var i=r[a];searchSuggestionsObj.addSuggestion(i.title)}s.setStatus(!0),s.complete(),TNZ.Util.console.log("TNZ.SwiftypeSuggestion|donehandler() : args",e,t,n)}},g=function(r,e){return function(e,t,n){TNZ.Util.console.log("TNZ.SwiftypeSuggestion|FailHandler() : args",e,t,n),r.setStatus(!1),r.setMessage("Failed to communicate properly with Swiftype"),r.setErrorData(arguments),r.complete()}};return e};